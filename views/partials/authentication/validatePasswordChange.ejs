<script type="text/javascript" src="/script/checkEmail.js"></script>
<script type="text/javascript" src="/script/passwordChangeScript.js"></script>
<script>
        const FormElement = document.getElementById('form'); 
        var ContainerElement = document.getElementById('container'); 
        const PasswordInput = document.getElementById('passwordInput');
        const ConfirmPasswordInput = document.getElementById('confirm_passwordInput'); 
        
        ShowSuccessMessage("You successfully changed your password.")

        form.addEventListener('submit', (event) =>{
            event.preventDefault(); 
            var isValid = true; 
            var errorMessage = "Error: <br />"; 

            if(PasswordInput.value.trim() != ConfirmPasswordInput.value.trim()){
                errorMessage += "Your confirmation password must match your password <br />"
                isValid = false; 
            }
            if(isValid){
                form.submit();
            }
            else{
                ShowErrorMessage(errorMessage)
            }
        })
  
        function ShowErrorMessage(message){
        const MessageDiv = document.createElement('div');
        MessageDiv.innerHTML = message; 
        MessageDiv.classList.add("EmailErrorMessage"); 
        ContainerElement.appendChild(MessageDiv); 
            
        setTimeout(()=>{
            MessageDiv.classList.add("DeleteMessageFadeIn");
        }, 1)
        setTimeout(()=>{ContainerElement.removeChild(MessageDiv)}, 10000)
        setTimeout(()=>{
            MessageDiv.classList.remove("DeleteMessageFadeIn"); 
            MessageDiv.classList.add("DeleteMessageFadeOut"); 
        }, 8000)
            
        }
</script>